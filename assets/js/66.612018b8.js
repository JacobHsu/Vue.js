(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{412:function(t,s,a){"use strict";a.r(s);var r=a(42),e=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server"}},[t._v("#")]),t._v(" Server")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://nodei.co/npm/pm2/",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://nodei.co/npm/pm2.png?downloads=true&stars=true",alt:"NPM"}}),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://pm2.keymetrics.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("pm2"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("[putty]\n192.168.x.x\nadministrator / password")]),t._v(" "),a("p",[a("code",[t._v("sudo ubuntu")])]),t._v(" "),a("p",[a("code",[t._v("pm2 list")])]),t._v(" "),a("p",[a("code",[t._v("pm2 describe <id>")])]),t._v(" "),a("p",[t._v("deploy.sh rsync")]),t._v(" "),a("p",[t._v("package.json")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"du"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm run app-build-uat && npm run app-deploy-uat"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app-deploy-uat"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./deploy.sh app uat"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("p",[t._v("deploy.sh")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"$1"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" then\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"$2"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uat"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" then\n        "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("app"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("uat node build"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("build"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" rsync "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("acvz "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("no"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("links "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("exclude"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" exclude"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("txt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("e ssh dist"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" administrator@"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("administrator"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("projects"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("app"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("frontend"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n")])])]),a("p",[t._v("linux")]),t._v(" "),a("p",[a("code",[t._v("mkdir <app-frontend>")]),a("br"),t._v(" "),a("code",[t._v("sudo chwon -R ubuntu:ubuntu <platform-frontend-dir>")])]),t._v(" "),a("h2",{attrs:{id:"gcp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gcp"}},[t._v("#")]),t._v(" gcp")]),t._v(" "),a("p",[t._v("退版的替代")]),t._v(" "),a("p",[t._v("流量遷移 "),a("a",{attrs:{href:"https://cloud.google.com/appengine/docs/admin-api/migrating-splitting-traffic?hl=zh-cn&refresh=1",target:"_blank",rel:"noopener noreferrer"}},[t._v("迁移和拆分流量"),a("OutboundLink")],1),a("br"),t._v("\nApp Engine / 版本 > 遷移流量")])])}),[],!1,null,null,null);s.default=e.exports}}]);